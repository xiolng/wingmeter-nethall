<template>
  <div class="pt_10">
    <van-tabs v-model="active" @click="selectTab">
      <van-tab v-for="(itemTitle,index) in tabTitle" :key="index" :title="itemTitle.title">
        <div style="height: calc(100vh - 60px); overflow-y: auto;" v-if="active === index">
          <van-list
            v-model="loading"
            :finished="finished"
            finished-text="没有更多了"
            @load="onLoad"
          >
            <van-cell v-for="item in list" :key="+item" @click="$router.push({name:'opencardDetail',params: {item}})">
              <van-row type="flex" align="center" justify="space-between">
                <van-col span="20">
                  <van-row type="flex" justify="space-between" class="mb_10">
                    <van-col>
                      <span>开卡号码</span>
                    </van-col>
                    <van-col>
                      <span>{{item.applyPhoneNum}}</span>
                    </van-col>
                  </van-row>
                  <van-row type="flex" justify="space-between">
                    <van-col>
                      <span>开卡状态</span>
                    </van-col>
                    <van-col>
                      <span>{{activeStatusMap[item.activeStatus]}}</span>
                    </van-col>
                  </van-row>
                </van-col>
                <van-col>
                  <van-icon name="arrow" size="20"></van-icon>
                </van-col>
              </van-row>
            </van-cell>
          </van-list>
        </div>
      </van-tab>
    </van-tabs>
  </div>
</template>

<script>
  export default {
    data() {
      return {
        active: 0,
        loading: false,
        finished: false,
        list: [],
        activeStatusMap: {
          "1": "待激活",
          "2": "激活成功",
          "3": "激活失败",
          "4": "过期回收"
        },
        tabTitle: [
          {title: '全部'},
          {title: '待激活'},
          {title: '激活成功'}
        ],
        listData : [{
          "userId": null,
          "applyId": null,
          "nickName": "安红霞",
          "getType": "1",
          "postStatus": null,
          "postAddress": "[object Object]长春市朝阳区吉林省舒兰市天德乡杨柯村一社",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "19917290181",
          "applyPackage": "39元步步高套餐（真朗）",
          "params": null,
          "createDate": 1561544706000,
          "introducerType": null,
          "introducerId": "2bda348119a34abe902b679cf9759466",
          "introducerMobile": "15844005420",
          "introducerName": "大侠",
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": "[object Object]",
          "city": "长春市",
          "area": "朝阳区",
          "address": "吉林省舒兰市天德乡杨柯村一社",
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "孙琪唐",
          "getType": "2",
          "postStatus": null,
          "postAddress": "[object Object]",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "19997100189",
          "applyPackage": "19元翼米果卡",
          "params": null,
          "createDate": 1542783151000,
          "introducerType": null,
          "introducerId": "693a85c299384b2b90acca9f5e7e5bcb",
          "introducerMobile": "18166802768",
          "introducerName": null,
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": "[object Object]",
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "张奚赫",
          "getType": "2",
          "postStatus": null,
          "postAddress": "[object Object]",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "19997100090",
          "applyPackage": "39元翼米果卡",
          "params": null,
          "createDate": 1542605319000,
          "introducerType": null,
          "introducerId": "693a85c299384b2b90acca9f5e7e5bcb",
          "introducerMobile": "18166802768",
          "introducerName": null,
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": "[object Object]",
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "张星",
          "getType": "2",
          "postStatus": null,
          "postAddress": "[object Object]",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "13364307027",
          "applyPackage": "天翼畅享40G（150元套餐）",
          "params": null,
          "createDate": 1542352983000,
          "introducerType": null,
          "introducerId": "463843424c6947cba92b161990161c96",
          "introducerMobile": "18043684091",
          "introducerName": "测试",
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": "[object Object]",
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "张星",
          "getType": "2",
          "postStatus": null,
          "postAddress": "[object Object]",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "19997100190",
          "applyPackage": "19元翼米果卡",
          "params": null,
          "createDate": 1542332863000,
          "introducerType": null,
          "introducerId": "2bda348119a34abe902b679cf9759466",
          "introducerMobile": "15844005420",
          "introducerName": "大侠",
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": "[object Object]",
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "王亮",
          "getType": "2",
          "postStatus": null,
          "postAddress": "",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "18043359942",
          "applyPackage": "19元翼米果卡",
          "params": null,
          "createDate": 1539067282000,
          "introducerType": null,
          "introducerId": "bf5edf3749c8488281300700b54a9d96",
          "introducerMobile": "18043352048",
          "introducerName": null,
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": null,
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 1,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "王亮",
          "getType": "2",
          "postStatus": null,
          "postAddress": "",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "18043357403",
          "applyPackage": "19元翼米果卡",
          "params": null,
          "createDate": 1539050269000,
          "introducerType": null,
          "introducerId": "bf5edf3749c8488281300700b54a9d96",
          "introducerMobile": "18043352048",
          "introducerName": null,
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": null,
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "王亮",
          "getType": "2",
          "postStatus": null,
          "postAddress": "",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "18043352048",
          "applyPackage": "19元翼米果卡",
          "params": null,
          "createDate": 1539048349000,
          "introducerType": null,
          "introducerId": "15a04442ab3c46bf95bf8605eb475b35",
          "introducerMobile": "18043357174",
          "introducerName": null,
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": null,
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "张星",
          "getType": "2",
          "postStatus": null,
          "postAddress": "",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "18943319154",
          "applyPackage": "19元翼米果卡",
          "params": null,
          "createDate": 1538291793000,
          "introducerType": null,
          "introducerId": "271a9ebde6ac471693f1bc77b9922ce9",
          "introducerMobile": "18088647774",
          "introducerName": null,
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": null,
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "陶鸿泽",
          "getType": "2",
          "postStatus": null,
          "postAddress": "",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "13364333913",
          "applyPackage": "19元翼米果卡",
          "params": null,
          "createDate": 1538288144000,
          "introducerType": null,
          "introducerId": "15a04442ab3c46bf95bf8605eb475b35",
          "introducerMobile": "18043357174",
          "introducerName": null,
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": null,
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "陶鸿泽",
          "getType": "2",
          "postStatus": null,
          "postAddress": "",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "18043352041",
          "applyPackage": "19元翼米果卡",
          "params": null,
          "createDate": 1538194383000,
          "introducerType": null,
          "introducerId": "15a04442ab3c46bf95bf8605eb475b35",
          "introducerMobile": "18043357174",
          "introducerName": null,
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": null,
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "陶鸿泽",
          "getType": "2",
          "postStatus": null,
          "postAddress": "",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "18043358463",
          "applyPackage": "19元翼米果卡",
          "params": null,
          "createDate": 1538193645000,
          "introducerType": null,
          "introducerId": "15a04442ab3c46bf95bf8605eb475b35",
          "introducerMobile": "18043357174",
          "introducerName": null,
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": null,
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "陶鸿泽",
          "getType": "2",
          "postStatus": null,
          "postAddress": "",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "18043359154",
          "applyPackage": "19元翼米果卡",
          "params": null,
          "createDate": 1538187134000,
          "introducerType": null,
          "introducerId": "15a04442ab3c46bf95bf8605eb475b35",
          "introducerMobile": "18043357174",
          "introducerName": null,
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": null,
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }, {
          "userId": null,
          "applyId": null,
          "nickName": "陶鸿泽",
          "getType": "2",
          "postStatus": null,
          "postAddress": "",
          "cidNum": null,
          "contractMobile": "15844005420",
          "applyPhoneNum": "13354338779",
          "applyPackage": "19元翼米果卡",
          "params": null,
          "createDate": 1537885142000,
          "introducerType": null,
          "introducerId": "b79412a810414ffbb2b3862769cd63f1",
          "introducerMobile": "13594086535",
          "introducerName": null,
          "managerId": null,
          "managerName": null,
          "companyCode": null,
          "companyName": null,
          "province": null,
          "city": null,
          "area": null,
          "address": null,
          "activeStatus": 2,
          "activeStatusStr": null,
          "startTime": null,
          "endTime": null,
          "startDate": null,
          "endDate": null,
          "postNum": null,
          "postSender": null,
          "postDate": null,
          "userMobile": null,
          "managerCompanyType": null,
          "activeDate": null,
          "cardPathFront": null,
          "cardPathBack": null,
          "cardPathHold": null,
          "cardTwoPath": null,
          "workUnit": null,
          "iccdNum": null,
          "activePathFront": null,
          "activePathVideo": null,
          "activePathVideoimg": null,
          "payType": null,
          "payDate": null,
          "payMoney": null,
          "shareUsername": null,
          "packageType": null,
          "isVerifyFlag": null,
          "isVerifyFlagStr": null
        }]
      }
    },
    methods: {
      selectTab(){
        this.list = []
      },
      onLoad() {
        // 异步更新数据
        if(this.active >= 1){
          this.list = this.listData.filter(v => +v.activeStatus === (+this.active))
        } else if (this.active <= 0) {
          this.list = this.listData
        }
        // 加载状态结束
        this.loading = false;

        // 数据全部加载完成
        if (this.list.length >= 40) {
          this.finished = true;
        }
      }
    }
  }
</script>

<style scoped>

</style>